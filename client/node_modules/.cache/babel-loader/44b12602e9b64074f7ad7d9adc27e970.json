{"ast":null,"code":"import _slicedToArray from\"C:/Users/mrgil/OneDrive/\\u0420\\u0430\\u0431\\u043E\\u0447\\u0438\\u0439 \\u0441\\u0442\\u043E\\u043B/Coincap/Coin/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import CoinBlock from'../../Components/ListPageComponents/CoinBlock';import Header from'../../Components/ListPageComponents/Header';import Pagination from'../../Components/ListPageComponents/Pagination';import{sortCoins}from'../../utilities/sortCoins';import Select from'../../Components/ListPageComponents/Select';import SearchBar from'../../Components/ListPageComponents/SearchBar';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function ListPage(_ref){var coins=_ref.coins,loading=_ref.loading;var _useState=useState(1),_useState2=_slicedToArray(_useState,2),currentPage=_useState2[0],setCurrentPage=_useState2[1];var _useState3=useState(12),_useState4=_slicedToArray(_useState3,1),coinsPerPage=_useState4[0];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),currentCoins=_useState6[0],setCurrentCoins=_useState6[1];var _useState7=useState(0),_useState8=_slicedToArray(_useState7,2),totalCoins=_useState8[0],setTotalCoins=_useState8[1];var _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),sortedCoins=_useState10[0],setSortedCoins=_useState10[1];var _useState11=useState(''),_useState12=_slicedToArray(_useState11,2),sortName=_useState12[0],setSortName=_useState12[1];var _useState13=useState(''),_useState14=_slicedToArray(_useState13,2),searchText=_useState14[0],setSearchText=_useState14[1];var _useState15=useState([]),_useState16=_slicedToArray(_useState15,2),cryptocurrency=_useState16[0],setCryptocurrency=_useState16[1];var pagination=function pagination(pageNamber){return setCurrentPage(pageNamber);};var sort=function sort(name){return setSortName(name);};var lastCoinsIndex=currentPage*coinsPerPage;var firstCoinsIndex=currentPage*coinsPerPage-coinsPerPage;useEffect(function(){setSortedCoins(coins);},[loading]);useEffect(function(){setCryptocurrency(coins);},[coins]);useEffect(function(){if(searchText.length!==0)return;setSortedCoins(sortCoins(sortName,cryptocurrency));},[sortName,searchText,cryptocurrency]);useEffect(function(){setCurrentCoins(sortedCoins.slice(firstCoinsIndex,lastCoinsIndex));setTotalCoins(sortedCoins.length);},[currentPage,sortedCoins]);var search=function search(text){setSearchText(text);var searchArray=[];// eslint-disable-next-line array-callback-return\ncryptocurrency.map(function(coin){var name=coin.name.substr(0,text.length);if(name.toLowerCase()===text.toLowerCase()){searchArray.push(coin);}});setCurrentPage(1);setSortedCoins(searchArray);};return/*#__PURE__*/_jsxs(\"div\",{className:\"list-page\",children:[/*#__PURE__*/_jsx(SearchBar,{search:search}),/*#__PURE__*/_jsx(Select,{sortName:sort}),/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsx(CoinBlock,{coins:currentCoins}),/*#__PURE__*/_jsx(Pagination,{coinsPerPage:coinsPerPage,totalCoins:totalCoins,pagination:pagination})]});}export default ListPage;","map":{"version":3,"sources":["C:/Users/mrgil/OneDrive/Рабочий стол/Coincap/Coin/src/Main/Pages/ListPage.jsx"],"names":["React","useEffect","useState","CoinBlock","Header","Pagination","sortCoins","Select","SearchBar","ListPage","coins","loading","currentPage","setCurrentPage","coinsPerPage","currentCoins","setCurrentCoins","totalCoins","setTotalCoins","sortedCoins","setSortedCoins","sortName","setSortName","searchText","setSearchText","cryptocurrency","setCryptocurrency","pagination","pageNamber","sort","name","lastCoinsIndex","firstCoinsIndex","length","slice","search","text","searchArray","map","coin","substr","toLowerCase","push"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport CoinBlock from '../../Components/ListPageComponents/CoinBlock';\r\nimport Header from '../../Components/ListPageComponents/Header';\r\nimport Pagination from '../../Components/ListPageComponents/Pagination';\r\nimport { sortCoins } from '../../utilities/sortCoins';\r\nimport Select from '../../Components/ListPageComponents/Select';\r\nimport SearchBar from '../../Components/ListPageComponents/SearchBar';\r\n\r\nfunction ListPage({ coins, loading }) {\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const [coinsPerPage] = useState(12);\r\n  const [currentCoins, setCurrentCoins] = useState([]);\r\n  const [totalCoins, setTotalCoins] = useState(0);\r\n  const [sortedCoins, setSortedCoins] = useState([]);\r\n  const [sortName, setSortName] = useState('');\r\n  const [searchText, setSearchText] = useState('');\r\n  const [cryptocurrency, setCryptocurrency] = useState([]);\r\n\r\n  const pagination = (pageNamber) => setCurrentPage(pageNamber);\r\n\r\n  const sort = (name) => setSortName(name);\r\n\r\n  const lastCoinsIndex = currentPage * coinsPerPage;\r\n  const firstCoinsIndex = (currentPage * coinsPerPage) - coinsPerPage;\r\n\r\n  useEffect(() => {\r\n    setSortedCoins(coins);\r\n  }, [loading]);\r\n\r\n  useEffect(() => {\r\n    setCryptocurrency(coins);\r\n  }, [coins]);\r\n\r\n  useEffect(() => {\r\n    if (searchText.length !== 0) return;\r\n    setSortedCoins(sortCoins(sortName, cryptocurrency));\r\n  }, [sortName, searchText, cryptocurrency]);\r\n\r\n  useEffect(() => {\r\n    setCurrentCoins(sortedCoins.slice(firstCoinsIndex, lastCoinsIndex));\r\n    setTotalCoins(sortedCoins.length);\r\n  }, [currentPage, sortedCoins]);\r\n\r\n  const search = (text) => {\r\n    setSearchText(text);\r\n    const searchArray = [];\r\n    // eslint-disable-next-line array-callback-return\r\n    cryptocurrency.map((coin) => {\r\n      const name = coin.name.substr(0, text.length);\r\n      if (name.toLowerCase() === text.toLowerCase()) {\r\n        searchArray.push(coin);\r\n      }\r\n    });\r\n    setCurrentPage(1);\r\n    setSortedCoins(searchArray);\r\n  };\r\n\r\n  return (\r\n    <div className=\"list-page\">\r\n      <SearchBar search={search} />\r\n      <Select sortName={sort} />\r\n      <Header />\r\n      <CoinBlock coins={currentCoins} />\r\n      <Pagination coinsPerPage={coinsPerPage} totalCoins={totalCoins} pagination={pagination} />\r\n    </div>\r\n\r\n  );\r\n}\r\n\r\nexport default ListPage;\r\n"]},"metadata":{},"sourceType":"module"}