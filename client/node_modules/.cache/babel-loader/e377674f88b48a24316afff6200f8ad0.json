{"ast":null,"code":"import _asyncToGenerator from\"C:/Users/mrgil/OneDrive/\\u0420\\u0430\\u0431\\u043E\\u0447\\u0438\\u0439 \\u0441\\u0442\\u043E\\u043B/Coincap/Coin/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/mrgil/OneDrive/\\u0420\\u0430\\u0431\\u043E\\u0447\\u0438\\u0439 \\u0441\\u0442\\u043E\\u043B/Coincap/Coin/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"C:\\\\Users\\\\mrgil\\\\OneDrive\\\\\\u0420\\u0430\\u0431\\u043E\\u0447\\u0438\\u0439 \\u0441\\u0442\\u043E\\u043B\\\\Coincap\\\\Coin\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import React,{useEffect,useState}from'react';import{Link}from'react-router-dom';import HeaderBlocks from'./components/HeaderBlocks';import getTotalPrice from'../utilities/totalprice';import priceDiff from'../utilities/priceDiff';import fixed from'../utilities/fixed';import SearchBar from'./components/SearchBar';import Settings from'./components/Settings';import BasketButton from'./components/BasketButton';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Header(_ref){var coins=_ref.coins,rate=_ref.rate,tasks=_ref.tasks,search=_ref.search,takeCoinsPerPage=_ref.takeCoinsPerPage,getRateId=_ref.getRateId;var _useState=useState(0),_useState2=_slicedToArray(_useState,2),totalPrice=_useState2[0],SetTotalPrice=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),priceDifferences=_useState4[0],setPriceDifferences=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),priceProcent=_useState6[0],setPriceProcent=_useState6[1];var currentCoins=coins.slice(0,4);currentCoins.splice(2,1);var getUpdateCoins=function getUpdateCoins(){var array=[];tasks.forEach(/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(task){var updateCoins;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:updateCoins=coins.find(function(coin){return coin.id===task.key;});array.push(updateCoins);case 2:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref2.apply(this,arguments);};}());return array;};var saveProcent=function saveProcent(totalAmount,priceDifference){if(!tasks.length)return setPriceProcent(null);var procent=priceDifference/(totalAmount/100);setPriceProcent(fixed(procent));return'';};var saveTotalPrice=function saveTotalPrice(){if(!tasks.length)return SetTotalPrice(0);var totalAmount=getTotalPrice(tasks);SetTotalPrice(fixed(totalAmount));return totalAmount;};var savePriceDifferences=function savePriceDifferences(totalAmount){if(!tasks.length)return setPriceDifferences(null);var array=getUpdateCoins();var priceDifference=priceDiff(array,tasks,totalAmount);setPriceDifferences(fixed(priceDifference));return priceDifference;};useEffect(function(){var totalAmount=saveTotalPrice();var priceDifference=savePriceDifferences(totalAmount);saveProcent(totalAmount,priceDifference);});var names=[10,12,15,17,20];return/*#__PURE__*/_jsxs(\"div\",{className:\"header\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"popular-coins\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"popular-coins__top\",children:\"MOST POPULAR COINS\"}),/*#__PURE__*/_jsx(HeaderBlocks,{currentCoins:currentCoins,rate:rate})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"navigation\",children:[/*#__PURE__*/_jsx(Link,{className:\"navigation__link\",to:'/*',children:\"Coins\"}),/*#__PURE__*/_jsx(BasketButton,{totalPrice:totalPrice,priceDifferences:priceDifferences,priceProcent:priceProcent})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"utils\",children:[/*#__PURE__*/_jsx(SearchBar,{search:search}),/*#__PURE__*/_jsx(Settings,{takeCoinsPerPage:takeCoinsPerPage,names:names,getRateId:getRateId})]})]});}export default Header;","map":{"version":3,"sources":["C:/Users/mrgil/OneDrive/Рабочий стол/Coincap/Coin/src/Header/Header.jsx"],"names":["React","useEffect","useState","Link","HeaderBlocks","getTotalPrice","priceDiff","fixed","SearchBar","Settings","BasketButton","Header","coins","rate","tasks","search","takeCoinsPerPage","getRateId","totalPrice","SetTotalPrice","priceDifferences","setPriceDifferences","priceProcent","setPriceProcent","currentCoins","slice","splice","getUpdateCoins","array","forEach","task","updateCoins","find","coin","id","key","push","saveProcent","totalAmount","priceDifference","length","procent","saveTotalPrice","savePriceDifferences","names"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport HeaderBlocks from './components/HeaderBlocks';\r\nimport getTotalPrice from '../utilities/totalprice';\r\nimport priceDiff from '../utilities/priceDiff';\r\nimport fixed from '../utilities/fixed';\r\nimport SearchBar from './components/SearchBar';\r\nimport Settings from './components/Settings';\r\nimport BasketButton from './components/BasketButton';\r\n\r\nfunction Header({\r\n  coins, rate, tasks, search, takeCoinsPerPage, getRateId,\r\n}) {\r\n  const [totalPrice, SetTotalPrice] = useState(0);\r\n  const [priceDifferences, setPriceDifferences] = useState(null);\r\n  const [priceProcent, setPriceProcent] = useState(null);\r\n\r\n  const currentCoins = coins.slice(0, 4);\r\n  currentCoins.splice(2, 1);\r\n\r\n  const getUpdateCoins = () => {\r\n    const array = [];\r\n    tasks.forEach(async (task) => {\r\n      const updateCoins = coins.find((coin) => coin.id === task.key);\r\n      array.push(updateCoins);\r\n    });\r\n    return array;\r\n  };\r\n\r\n  const saveProcent = (totalAmount, priceDifference) => {\r\n    if (!tasks.length) return setPriceProcent(null);\r\n    const procent = priceDifference / (totalAmount / 100);\r\n    setPriceProcent(fixed(procent));\r\n    return '';\r\n  };\r\n\r\n  const saveTotalPrice = () => {\r\n    if (!tasks.length) return SetTotalPrice(0);\r\n    const totalAmount = getTotalPrice(tasks);\r\n    SetTotalPrice(fixed(totalAmount));\r\n    return totalAmount;\r\n  };\r\n\r\n  const savePriceDifferences = (totalAmount) => {\r\n    if (!tasks.length) return setPriceDifferences(null);\r\n    const array = getUpdateCoins();\r\n    const priceDifference = priceDiff(array, tasks, totalAmount);\r\n    setPriceDifferences(fixed(priceDifference));\r\n    return priceDifference;\r\n  };\r\n\r\n  useEffect(() => {\r\n    const totalAmount = saveTotalPrice();\r\n    const priceDifference = savePriceDifferences(totalAmount);\r\n    saveProcent(totalAmount, priceDifference);\r\n  });\r\n\r\n  const names = [10, 12, 15, 17, 20];\r\n\r\n  return (\r\n    <div className=\"header\">\r\n      <div className=\"popular-coins\">\r\n        <div className=\"popular-coins__top\">\r\n          MOST POPULAR COINS\r\n        </div>\r\n        <HeaderBlocks currentCoins={currentCoins} rate={rate} />\r\n      </div>\r\n      <div className=\"navigation\">\r\n        <Link className=\"navigation__link\" to={'/*'}>\r\n          Coins\r\n        </Link>\r\n        <BasketButton totalPrice={totalPrice} priceDifferences={priceDifferences} priceProcent={priceProcent} />\r\n      </div>\r\n      <div className=\"utils\">\r\n        <SearchBar search={search} />\r\n        <Settings takeCoinsPerPage={takeCoinsPerPage} names={names} getRateId={getRateId} />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Header;\r\n"]},"metadata":{},"sourceType":"module"}