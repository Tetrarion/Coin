{"ast":null,"code":"import _asyncToGenerator from\"C:/Users/mrgil/OneDrive/\\u0420\\u0430\\u0431\\u043E\\u0447\\u0438\\u0439 \\u0441\\u0442\\u043E\\u043B/Coincap/Coin/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _regeneratorRuntime from\"C:\\\\Users\\\\mrgil\\\\OneDrive\\\\\\u0420\\u0430\\u0431\\u043E\\u0447\\u0438\\u0439 \\u0441\\u0442\\u043E\\u043B\\\\Coincap\\\\Coin\\\\client\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import*as actions from'./actionTypes';import{GET_RATE}from'../query/rates';import{GET_COIN_PRICE}from'../query/coins';import{client}from'../client';export var addCoin=function addCoin(data){return{type:actions.COIN_ADD,payload:{name:data.coinResponse.name,symbol:data.rateResponse.currencySymbol,count:data.count,price:data.price,coinTotalPrice:data.coinTotalPrice,coinTotalPriceUsd:data.coinTotalPriceUsd,key:data.coinResponse.id}};};export var removeCoin=function removeCoin(id){return{type:actions.COIN_REMOVE,payload:{id:id}};};export var loadCoin=function loadCoin(id,count,message,rateId){return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch){var coinResponse,rateResponse,coinTotalPrice,coinTotalPriceUsd,price;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return client.query({query:GET_COIN_PRICE,variables:{id:id}});case 2:coinResponse=_context.sent;_context.next=5;return client.query({query:GET_RATE,variables:{id:rateId}});case 5:rateResponse=_context.sent;coinResponse=coinResponse.data.getCoin;rateResponse=rateResponse.data.getRate;coinTotalPrice=coinResponse.priceUsd*count*rateResponse.rateUsd;coinTotalPriceUsd=coinResponse.priceUsd*count;price=coinResponse.priceUsd*rateResponse.rateUsd;dispatch(addCoin({rateResponse:rateResponse,coinResponse:coinResponse,count:count,price:price,coinTotalPrice:coinTotalPrice,coinTotalPriceUsd:coinTotalPriceUsd}));message.classList.remove('message--hidden');setTimeout(function(){return message.classList.add('message--hidden');},3000);case 14:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();};","map":{"version":3,"sources":["C:/Users/mrgil/OneDrive/Рабочий стол/Coincap/Coin/client/src/Store/actions.js"],"names":["actions","GET_RATE","GET_COIN_PRICE","client","addCoin","data","type","COIN_ADD","payload","name","coinResponse","symbol","rateResponse","currencySymbol","count","price","coinTotalPrice","coinTotalPriceUsd","key","id","removeCoin","COIN_REMOVE","loadCoin","message","rateId","dispatch","query","variables","getCoin","getRate","priceUsd","rateUsd","classList","remove","setTimeout","add"],"mappings":"yZAAA,MAAO,GAAKA,CAAAA,OAAZ,KAAyB,eAAzB,CACA,OAASC,QAAT,KAAyB,gBAAzB,CACA,OAASC,cAAT,KAA+B,gBAA/B,CACA,OAASC,MAAT,KAAuB,WAAvB,CAEA,MAAO,IAAMC,CAAAA,OAAO,CAAG,QAAVA,CAAAA,OAAU,CAACC,IAAD,QAAW,CAChCC,IAAI,CAAEN,OAAO,CAACO,QADkB,CAEhCC,OAAO,CAAE,CACPC,IAAI,CAAEJ,IAAI,CAACK,YAAL,CAAkBD,IADjB,CAEPE,MAAM,CAAEN,IAAI,CAACO,YAAL,CAAkBC,cAFnB,CAGPC,KAAK,CAAET,IAAI,CAACS,KAHL,CAIPC,KAAK,CAAEV,IAAI,CAACU,KAJL,CAKPC,cAAc,CAAEX,IAAI,CAACW,cALd,CAMPC,iBAAiB,CAAEZ,IAAI,CAACY,iBANjB,CAOPC,GAAG,CAAEb,IAAI,CAACK,YAAL,CAAkBS,EAPhB,CAFuB,CAAX,EAAhB,CAYP,MAAO,IAAMC,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,CAACD,EAAD,QAAS,CACjCb,IAAI,CAAEN,OAAO,CAACqB,WADmB,CAEjCb,OAAO,CAAE,CAAEW,EAAE,CAAFA,EAAF,CAFwB,CAAT,EAAnB,CAIP,MAAO,IAAMG,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,CAACH,EAAD,CAAKL,KAAL,CAAYS,OAAZ,CAAqBC,MAArB,iGAAgC,iBAAOC,QAAP,6MAC7BtB,CAAAA,MAAM,CAACuB,KAAP,CAAa,CACpCA,KAAK,CAAExB,cAD6B,CAEpCyB,SAAS,CAAE,CACTR,EAAE,CAAFA,EADS,CAFyB,CAAb,CAD6B,QAClDT,YADkD,qCAO7BP,CAAAA,MAAM,CAACuB,KAAP,CAAa,CACpCA,KAAK,CAAEzB,QAD6B,CAEpC0B,SAAS,CAAE,CACTR,EAAE,CAAEK,MADK,CAFyB,CAAb,CAP6B,QAOlDZ,YAPkD,eAatDF,YAAY,CAAGA,YAAY,CAACL,IAAb,CAAkBuB,OAAjC,CACAhB,YAAY,CAAGA,YAAY,CAACP,IAAb,CAAkBwB,OAAjC,CACMb,cAfgD,CAe/BN,YAAY,CAACoB,QAAb,CAAwBhB,KAAxB,CAAgCF,YAAY,CAACmB,OAfd,CAgBhDd,iBAhBgD,CAgB5BP,YAAY,CAACoB,QAAb,CAAwBhB,KAhBI,CAiBhDC,KAjBgD,CAiBxCL,YAAY,CAACoB,QAAb,CAAwBlB,YAAY,CAACmB,OAjBG,CAkBtDN,QAAQ,CAACrB,OAAO,CAAC,CACfQ,YAAY,CAAZA,YADe,CAEfF,YAAY,CAAZA,YAFe,CAGfI,KAAK,CAALA,KAHe,CAIfC,KAAK,CAALA,KAJe,CAKfC,cAAc,CAAdA,cALe,CAMfC,iBAAiB,CAAjBA,iBANe,CAAD,CAAR,CAAR,CAQAM,OAAO,CAACS,SAAR,CAAkBC,MAAlB,CAAyB,iBAAzB,EACAC,UAAU,CAAC,iBAAMX,CAAAA,OAAO,CAACS,SAAR,CAAkBG,GAAlB,CAAsB,iBAAtB,CAAN,EAAD,CAAiD,IAAjD,CAAV,CA3BsD,uDAAhC,gEAAjB","sourcesContent":["import * as actions from './actionTypes';\r\nimport { GET_RATE } from '../query/rates';\r\nimport { GET_COIN_PRICE } from '../query/coins';\r\nimport { client } from '../client';\r\n\r\nexport const addCoin = (data) => ({\r\n  type: actions.COIN_ADD,\r\n  payload: {\r\n    name: data.coinResponse.name,\r\n    symbol: data.rateResponse.currencySymbol,\r\n    count: data.count,\r\n    price: data.price,\r\n    coinTotalPrice: data.coinTotalPrice,\r\n    coinTotalPriceUsd: data.coinTotalPriceUsd,\r\n    key: data.coinResponse.id,\r\n  },\r\n});\r\nexport const removeCoin = (id) => ({\r\n  type: actions.COIN_REMOVE,\r\n  payload: { id },\r\n});\r\nexport const loadCoin = (id, count, message, rateId) => async (dispatch) => {\r\n  let coinResponse = await client.query({\r\n    query: GET_COIN_PRICE,\r\n    variables: {\r\n      id,\r\n    },\r\n  });\r\n  let rateResponse = await client.query({\r\n    query: GET_RATE,\r\n    variables: {\r\n      id: rateId,\r\n    },\r\n  });\r\n  coinResponse = coinResponse.data.getCoin;\r\n  rateResponse = rateResponse.data.getRate;\r\n  const coinTotalPrice = coinResponse.priceUsd * count * rateResponse.rateUsd;\r\n  const coinTotalPriceUsd = coinResponse.priceUsd * count;\r\n  const price = coinResponse.priceUsd * rateResponse.rateUsd;\r\n  dispatch(addCoin({\r\n    rateResponse,\r\n    coinResponse,\r\n    count,\r\n    price,\r\n    coinTotalPrice,\r\n    coinTotalPriceUsd,\r\n  }));\r\n  message.classList.remove('message--hidden');\r\n  setTimeout(() => message.classList.add('message--hidden'), 3000);\r\n};\r\n"]},"metadata":{},"sourceType":"module"}