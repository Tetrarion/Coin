{"ast":null,"code":"import _slicedToArray from\"C:/Users/mrgil/OneDrive/\\u0420\\u0430\\u0431\\u043E\\u0447\\u0438\\u0439 \\u0441\\u0442\\u043E\\u043B/Coincap/Coin/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import CoinBlock from'../../Components/ListPageComponents/CoinBlock';import Header from'../../Components/ListPageComponents/Header';import Pagination from'../../Components/ListPageComponents/Pagination';import{sortCoins}from'../../utilities/sortCoins';import Select from'../../Components/ListPageComponents/Select';import SearchBar from'../../Components/ListPageComponents/SearchBar';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function ListPage(_ref){var coins=_ref.coins,loading=_ref.loading;var _useState=useState(1),_useState2=_slicedToArray(_useState,2),currentPage=_useState2[0],setCurrentPage=_useState2[1];var _useState3=useState(12),_useState4=_slicedToArray(_useState3,1),coinsPerPage=_useState4[0];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),currentCoins=_useState6[0],setCurrentCoins=_useState6[1];var _useState7=useState(0),_useState8=_slicedToArray(_useState7,2),totalCoins=_useState8[0],setTotalCoins=_useState8[1];var _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),array=_useState10[0],setArray=_useState10[1];var _useState11=useState(''),_useState12=_slicedToArray(_useState11,2),sortName=_useState12[0],setSortName=_useState12[1];var _useState13=useState(''),_useState14=_slicedToArray(_useState13,2),searchText=_useState14[0],setSearchText=_useState14[1];var pagination=function pagination(pageNamber){return setCurrentPage(pageNamber);};var lastCoinsIndex=currentPage*coinsPerPage;var firstCoinsIndex=currentPage*coinsPerPage-coinsPerPage;useEffect(function(){setArray(coins);},[loading]);useEffect(function(){setCurrentCoins(array.slice(firstCoinsIndex,lastCoinsIndex));setTotalCoins(array.length);},[firstCoinsIndex,lastCoinsIndex,array,coins]);var search=function search(text){setSearchText(text);var searchArray=[];// eslint-disable-next-line array-callback-return\ncoins.map(function(coin){var name=coin.name.substr(0,text.length);if(name.toLowerCase()===text.toLowerCase()){searchArray.push(coin);}});setCurrentPage(1);setArray(searchArray);};useEffect(function(){if(searchText.length!==0)return;console.log(sortName);setArray(sortCoins(sortName,coins));},[sortName,coins]);var sort=function sort(name){return setSortName(name);};return/*#__PURE__*/_jsxs(\"div\",{className:\"list-page\",children:[/*#__PURE__*/_jsx(SearchBar,{search:search}),/*#__PURE__*/_jsx(Select,{sortName:sort}),/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsx(CoinBlock,{coins:currentCoins}),/*#__PURE__*/_jsx(Pagination,{coinsPerPage:coinsPerPage,totalCoins:totalCoins,pagination:pagination})]});}export default ListPage;","map":{"version":3,"sources":["C:/Users/mrgil/OneDrive/Рабочий стол/Coincap/Coin/src/Main/Pages/ListPage.jsx"],"names":["React","useEffect","useState","CoinBlock","Header","Pagination","sortCoins","Select","SearchBar","ListPage","coins","loading","currentPage","setCurrentPage","coinsPerPage","currentCoins","setCurrentCoins","totalCoins","setTotalCoins","array","setArray","sortName","setSortName","searchText","setSearchText","pagination","pageNamber","lastCoinsIndex","firstCoinsIndex","slice","length","search","text","searchArray","map","coin","name","substr","toLowerCase","push","console","log","sort"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport CoinBlock from '../../Components/ListPageComponents/CoinBlock';\r\nimport Header from '../../Components/ListPageComponents/Header';\r\nimport Pagination from '../../Components/ListPageComponents/Pagination';\r\nimport { sortCoins } from '../../utilities/sortCoins';\r\nimport Select from '../../Components/ListPageComponents/Select';\r\nimport SearchBar from '../../Components/ListPageComponents/SearchBar';\r\n\r\nfunction ListPage({ coins, loading }) {\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const [coinsPerPage] = useState(12);\r\n  const [currentCoins, setCurrentCoins] = useState([]);\r\n  const [totalCoins, setTotalCoins] = useState(0);\r\n  const [array, setArray] = useState([]);\r\n  const [sortName, setSortName] = useState('');\r\n  const [searchText, setSearchText] = useState('');\r\n\r\n  const pagination = (pageNamber) => setCurrentPage(pageNamber);\r\n\r\n  const lastCoinsIndex = currentPage * coinsPerPage;\r\n  const firstCoinsIndex = (currentPage * coinsPerPage) - coinsPerPage;\r\n\r\n  useEffect(() => {\r\n    setArray(coins);\r\n  }, [loading]);\r\n\r\n  useEffect(() => {\r\n    setCurrentCoins(array.slice(firstCoinsIndex, lastCoinsIndex));\r\n    setTotalCoins(array.length);\r\n  }, [firstCoinsIndex, lastCoinsIndex, array, coins]);\r\n\r\n  const search = (text) => {\r\n    setSearchText(text);\r\n    const searchArray = [];\r\n    // eslint-disable-next-line array-callback-return\r\n    coins.map((coin) => {\r\n      const name = coin.name.substr(0, text.length);\r\n      if (name.toLowerCase() === text.toLowerCase()) {\r\n        searchArray.push(coin);\r\n      }\r\n    });\r\n    setCurrentPage(1);\r\n    setArray(searchArray);\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (searchText.length !== 0) return;\r\n    console.log(sortName);\r\n    setArray(sortCoins(sortName, coins));\r\n  }, [sortName, coins]);\r\n\r\n  const sort = (name) => setSortName(name);\r\n\r\n  return (\r\n    <div className=\"list-page\">\r\n      <SearchBar search={search} />\r\n      <Select sortName={sort} />\r\n      <Header />\r\n      <CoinBlock coins={currentCoins} />\r\n      <Pagination coinsPerPage={coinsPerPage} totalCoins={totalCoins} pagination={pagination} />\r\n    </div>\r\n\r\n  );\r\n}\r\n\r\nexport default ListPage;\r\n"]},"metadata":{},"sourceType":"module"}