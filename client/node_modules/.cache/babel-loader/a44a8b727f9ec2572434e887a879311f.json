{"ast":null,"code":"import * as actions from './actionTypes';\nimport { GET_RATE } from '../query/rates';\nimport { GET_COIN } from '../query/coins';\nimport { client } from '../client';\nexport const addCoin = data => ({\n  type: actions.COIN_ADD,\n  payload: {\n    name: data.coinResponse.name,\n    symbol: data.rateResponse.currencySymbol,\n    count: data.count,\n    price: data.price,\n    coinTotalPrice: data.coinTotalPrice,\n    coinTotalPriceUsd: data.coinTotalPriceUsd,\n    key: data.coinResponse.id\n  }\n});\nexport const removeCoin = id => ({\n  type: actions.COIN_REMOVE,\n  payload: {\n    id\n  }\n});\nexport const loadCoin = (id, count, message, rateId) => async dispatch => {\n  const coinResponse = await client.query({\n    GET_COIN\n  }, {\n    variables: {\n      id\n    }\n  });\n  const rateResponse = await client.query({\n    GET_RATE\n  }, {\n    variables: {\n      id: rateId\n    }\n  });\n  const coinTotalPrice = coinResponse.priceUsd * count * rateResponse.rateUsd;\n  const coinTotalPriceUsd = coinResponse.priceUsd * count;\n  const price = coinResponse.priceUsd * rateResponse.rateUsd;\n  dispatch(addCoin({\n    rateResponse,\n    coinResponse,\n    count,\n    price,\n    coinTotalPrice,\n    coinTotalPriceUsd\n  }));\n  message.classList.remove('message--hidden');\n  setTimeout(() => message.classList.add('message--hidden'), 3000);\n};","map":{"version":3,"sources":["C:/Users/mrgil/OneDrive/Рабочий стол/Coincap/Coin/client/src/Store/actions.js"],"names":["actions","GET_RATE","GET_COIN","client","addCoin","data","type","COIN_ADD","payload","name","coinResponse","symbol","rateResponse","currencySymbol","count","price","coinTotalPrice","coinTotalPriceUsd","key","id","removeCoin","COIN_REMOVE","loadCoin","message","rateId","dispatch","query","variables","priceUsd","rateUsd","classList","remove","setTimeout","add"],"mappings":"AAAA,OAAO,KAAKA,OAAZ,MAAyB,eAAzB;AACA,SAASC,QAAT,QAAyB,gBAAzB;AACA,SAASC,QAAT,QAAyB,gBAAzB;AACA,SAASC,MAAT,QAAuB,WAAvB;AAEA,OAAO,MAAMC,OAAO,GAAIC,IAAD,KAAW;AAChCC,EAAAA,IAAI,EAAEN,OAAO,CAACO,QADkB;AAEhCC,EAAAA,OAAO,EAAE;AACPC,IAAAA,IAAI,EAAEJ,IAAI,CAACK,YAAL,CAAkBD,IADjB;AAEPE,IAAAA,MAAM,EAAEN,IAAI,CAACO,YAAL,CAAkBC,cAFnB;AAGPC,IAAAA,KAAK,EAAET,IAAI,CAACS,KAHL;AAIPC,IAAAA,KAAK,EAAEV,IAAI,CAACU,KAJL;AAKPC,IAAAA,cAAc,EAAEX,IAAI,CAACW,cALd;AAMPC,IAAAA,iBAAiB,EAAEZ,IAAI,CAACY,iBANjB;AAOPC,IAAAA,GAAG,EAAEb,IAAI,CAACK,YAAL,CAAkBS;AAPhB;AAFuB,CAAX,CAAhB;AAYP,OAAO,MAAMC,UAAU,GAAID,EAAD,KAAS;AACjCb,EAAAA,IAAI,EAAEN,OAAO,CAACqB,WADmB;AAEjCb,EAAAA,OAAO,EAAE;AAAEW,IAAAA;AAAF;AAFwB,CAAT,CAAnB;AAIP,OAAO,MAAMG,QAAQ,GAAG,CAACH,EAAD,EAAKL,KAAL,EAAYS,OAAZ,EAAqBC,MAArB,KAAgC,MAAOC,QAAP,IAAoB;AAC1E,QAAMf,YAAY,GAAG,MAAMP,MAAM,CAACuB,KAAP,CAAa;AAAExB,IAAAA;AAAF,GAAb,EAA2B;AACpDyB,IAAAA,SAAS,EAAE;AACTR,MAAAA;AADS;AADyC,GAA3B,CAA3B;AAKA,QAAMP,YAAY,GAAG,MAAMT,MAAM,CAACuB,KAAP,CAAa;AAAEzB,IAAAA;AAAF,GAAb,EAA2B;AACpD0B,IAAAA,SAAS,EAAE;AACTR,MAAAA,EAAE,EAAEK;AADK;AADyC,GAA3B,CAA3B;AAKA,QAAMR,cAAc,GAAGN,YAAY,CAACkB,QAAb,GAAwBd,KAAxB,GAAgCF,YAAY,CAACiB,OAApE;AACA,QAAMZ,iBAAiB,GAAGP,YAAY,CAACkB,QAAb,GAAwBd,KAAlD;AACA,QAAMC,KAAK,GAAGL,YAAY,CAACkB,QAAb,GAAwBhB,YAAY,CAACiB,OAAnD;AACAJ,EAAAA,QAAQ,CAACrB,OAAO,CAAC;AACfQ,IAAAA,YADe;AAEfF,IAAAA,YAFe;AAGfI,IAAAA,KAHe;AAIfC,IAAAA,KAJe;AAKfC,IAAAA,cALe;AAMfC,IAAAA;AANe,GAAD,CAAR,CAAR;AAQAM,EAAAA,OAAO,CAACO,SAAR,CAAkBC,MAAlB,CAAyB,iBAAzB;AACAC,EAAAA,UAAU,CAAC,MAAMT,OAAO,CAACO,SAAR,CAAkBG,GAAlB,CAAsB,iBAAtB,CAAP,EAAiD,IAAjD,CAAV;AACD,CAxBM","sourcesContent":["import * as actions from './actionTypes';\r\nimport { GET_RATE } from '../query/rates';\r\nimport { GET_COIN } from '../query/coins';\r\nimport { client } from '../client';\r\n\r\nexport const addCoin = (data) => ({\r\n  type: actions.COIN_ADD,\r\n  payload: {\r\n    name: data.coinResponse.name,\r\n    symbol: data.rateResponse.currencySymbol,\r\n    count: data.count,\r\n    price: data.price,\r\n    coinTotalPrice: data.coinTotalPrice,\r\n    coinTotalPriceUsd: data.coinTotalPriceUsd,\r\n    key: data.coinResponse.id,\r\n  },\r\n});\r\nexport const removeCoin = (id) => ({\r\n  type: actions.COIN_REMOVE,\r\n  payload: { id },\r\n});\r\nexport const loadCoin = (id, count, message, rateId) => async (dispatch) => {\r\n  const coinResponse = await client.query({ GET_COIN }, {\r\n    variables: {\r\n      id,\r\n    },\r\n  });\r\n  const rateResponse = await client.query({ GET_RATE }, {\r\n    variables: {\r\n      id: rateId,\r\n    },\r\n  });\r\n  const coinTotalPrice = coinResponse.priceUsd * count * rateResponse.rateUsd;\r\n  const coinTotalPriceUsd = coinResponse.priceUsd * count;\r\n  const price = coinResponse.priceUsd * rateResponse.rateUsd;\r\n  dispatch(addCoin({\r\n    rateResponse,\r\n    coinResponse,\r\n    count,\r\n    price,\r\n    coinTotalPrice,\r\n    coinTotalPriceUsd,\r\n  }));\r\n  message.classList.remove('message--hidden');\r\n  setTimeout(() => message.classList.add('message--hidden'), 3000);\r\n};\r\n"]},"metadata":{},"sourceType":"module"}