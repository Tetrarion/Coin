{"ast":null,"code":"import _asyncToGenerator from\"C:/Users/mrgil/OneDrive/\\u0420\\u0430\\u0431\\u043E\\u0447\\u0438\\u0439 \\u0441\\u0442\\u043E\\u043B/Coincap/Coin/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/mrgil/OneDrive/\\u0420\\u0430\\u0431\\u043E\\u0447\\u0438\\u0439 \\u0441\\u0442\\u043E\\u043B/Coincap/Coin/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"C:\\\\Users\\\\mrgil\\\\OneDrive\\\\\\u0420\\u0430\\u0431\\u043E\\u0447\\u0438\\u0439 \\u0441\\u0442\\u043E\\u043B\\\\Coincap\\\\Coin\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import React,{useEffect,useState}from'react';import CoinBlock from'../../Components/ListPageComponents/CoinBlock';import Header from'../../Components/ListPageComponents/Header';import Pagination from'../../Components/ListPageComponents/Pagination';// import { sortCoins } from '../../utilities/sortCoins';\nimport getInfo from'../../API/api';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function ListPage(_ref){var searchText=_ref.searchText,coinsPerPage=_ref.coinsPerPage,rate=_ref.rate;var _useState=useState(1),_useState2=_slicedToArray(_useState,2),currentPage=_useState2[0],setCurrentPage=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),currentCoins=_useState4[0],setCurrentCoins=_useState4[1];var _useState5=useState(2000),_useState6=_slicedToArray(_useState5,2),totalCoins=_useState6[0],setTotalCoins=_useState6[1];var _useState7=useState(0),_useState8=_slicedToArray(_useState7,2),time=_useState8[0],setTime=_useState8[1];var _useState9=useState(200),_useState10=_slicedToArray(_useState9,2),totalPages=_useState10[0],setTotalPages=_useState10[1];// const [sortedCoins, setSortedCoins] = useState([]);\n// const [sortName, setSortName] = useState('');\n// const [cryptocurrency, setCryptocurrency] = useState([]);\nvar pagination=function pagination(pageNamber){return setCurrentPage(pageNamber);};// const sort = (name) => setSortName(name);\nuseEffect(function(){var update=function update(){setTime(function(prevTime){return prevTime+1;});setTimeout(update,10000);};update();},[]);useEffect(function(){setTotalPages(Math.ceil(totalCoins/coinsPerPage));},[totalCoins,coinsPerPage]);useEffect(function(){var getCoins=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var firstCoinsIndex,response,responseCount;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:firstCoinsIndex=currentPage*coinsPerPage-coinsPerPage;if(!(searchText.length!==0)){_context.next=11;break;}_context.next=4;return getInfo(\"assets/?search=\".concat(searchText,\"&limit=2000\"));case 4:responseCount=_context.sent;_context.next=7;return getInfo(\"assets/?offset=\".concat(firstCoinsIndex,\"&limit=\").concat(coinsPerPage,\"&search=\").concat(searchText));case 7:response=_context.sent;setTotalCoins(responseCount.length);_context.next=15;break;case 11:_context.next=13;return getInfo(\"assets/?offset=\".concat(firstCoinsIndex,\"&limit=\").concat(coinsPerPage));case 13:response=_context.sent;setTotalCoins(2000);case 15:setCurrentCoins(response);case 16:case\"end\":return _context.stop();}}},_callee);}));return function getCoins(){return _ref2.apply(this,arguments);};}();getCoins();},[coinsPerPage,time,currentPage,searchText]);// useEffect(() => {\n//   if (searchText.length !== 0) return;\n//   setSortedCoins(sortCoins(sortName, cryptocurrency));\n// }, [sortName, searchText, cryptocurrency]);\nreturn/*#__PURE__*/_jsxs(\"div\",{className:\"list-page\",children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsx(CoinBlock,{coins:currentCoins,rate:rate}),/*#__PURE__*/_jsx(Pagination,{totalPages:totalPages,pagination:pagination})]});}export default ListPage;","map":{"version":3,"sources":["C:/Users/mrgil/OneDrive/Рабочий стол/Coincap/Coin/src/Main/Pages/ListPage.jsx"],"names":["React","useEffect","useState","CoinBlock","Header","Pagination","getInfo","ListPage","searchText","coinsPerPage","rate","currentPage","setCurrentPage","currentCoins","setCurrentCoins","totalCoins","setTotalCoins","time","setTime","totalPages","setTotalPages","pagination","pageNamber","update","prevTime","setTimeout","Math","ceil","getCoins","firstCoinsIndex","length","responseCount","response"],"mappings":"wkBAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,CACA,MAAOC,CAAAA,SAAP,KAAsB,+CAAtB,CACA,MAAOC,CAAAA,MAAP,KAAmB,4CAAnB,CACA,MAAOC,CAAAA,UAAP,KAAuB,gDAAvB,CACA;AACA,MAAOC,CAAAA,OAAP,KAAoB,eAApB,C,wFAEA,QAASC,CAAAA,QAAT,MAAsD,IAAlCC,CAAAA,UAAkC,MAAlCA,UAAkC,CAAtBC,YAAsB,MAAtBA,YAAsB,CAARC,IAAQ,MAARA,IAAQ,CACpD,cAAsCR,QAAQ,CAAC,CAAD,CAA9C,wCAAOS,WAAP,eAAoBC,cAApB,eACA,eAAwCV,QAAQ,CAAC,EAAD,CAAhD,yCAAOW,YAAP,eAAqBC,eAArB,eACA,eAAoCZ,QAAQ,CAAC,IAAD,CAA5C,yCAAOa,UAAP,eAAmBC,aAAnB,eACA,eAAwBd,QAAQ,CAAC,CAAD,CAAhC,yCAAOe,IAAP,eAAaC,OAAb,eACA,eAAoChB,QAAQ,CAAC,GAAD,CAA5C,0CAAOiB,UAAP,gBAAmBC,aAAnB,gBACA;AACA;AACA;AAEA,GAAMC,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,CAACC,UAAD,QAAgBV,CAAAA,cAAc,CAACU,UAAD,CAA9B,EAAnB,CAEA;AAEArB,SAAS,CAAC,UAAM,CACd,GAAMsB,CAAAA,MAAM,CAAG,QAATA,CAAAA,MAAS,EAAM,CACnBL,OAAO,CAAC,SAACM,QAAD,QAAcA,CAAAA,QAAQ,CAAG,CAAzB,EAAD,CAAP,CACAC,UAAU,CAACF,MAAD,CAAS,KAAT,CAAV,CACD,CAHD,CAIAA,MAAM,GACP,CANQ,CAMN,EANM,CAAT,CAQAtB,SAAS,CAAC,UAAM,CACdmB,aAAa,CAACM,IAAI,CAACC,IAAL,CAAUZ,UAAU,CAAGN,YAAvB,CAAD,CAAb,CACD,CAFQ,CAEN,CAACM,UAAD,CAAaN,YAAb,CAFM,CAAT,CAIAR,SAAS,CAAC,UAAM,CACd,GAAM2B,CAAAA,QAAQ,2FAAG,8KACTC,eADS,CACUlB,WAAW,CAAGF,YAAf,CAA+BA,YADxC,MAGXD,UAAU,CAACsB,MAAX,GAAsB,CAHX,iDAIexB,CAAAA,OAAO,0BAAmBE,UAAnB,gBAJtB,QAIPuB,aAJO,qCAKIzB,CAAAA,OAAO,0BAAmBuB,eAAnB,mBAA4CpB,YAA5C,oBAAmED,UAAnE,EALX,QAKbwB,QALa,eAMbhB,aAAa,CAACe,aAAa,CAACD,MAAf,CAAb,CANa,sDAQIxB,CAAAA,OAAO,0BAAmBuB,eAAnB,mBAA4CpB,YAA5C,EARX,SAQbuB,QARa,eASbhB,aAAa,CAAC,IAAD,CAAb,CATa,QAWfF,eAAe,CAACkB,QAAD,CAAf,CAXe,uDAAH,kBAARJ,CAAAA,QAAQ,2CAAd,CAaAA,QAAQ,GACT,CAfQ,CAeN,CAACnB,YAAD,CAAeQ,IAAf,CAAqBN,WAArB,CAAkCH,UAAlC,CAfM,CAAT,CAiBA;AACA;AACA;AACA;AAEA,mBACE,aAAK,SAAS,CAAC,WAAf,wBACE,KAAC,MAAD,IADF,cAEE,KAAC,SAAD,EAAW,KAAK,CAAEK,YAAlB,CAAgC,IAAI,CAAEH,IAAtC,EAFF,cAGE,KAAC,UAAD,EAAY,UAAU,CAAES,UAAxB,CAAoC,UAAU,CAAEE,UAAhD,EAHF,GADF,CAQD,CAED,cAAed,CAAAA,QAAf","sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport CoinBlock from '../../Components/ListPageComponents/CoinBlock';\r\nimport Header from '../../Components/ListPageComponents/Header';\r\nimport Pagination from '../../Components/ListPageComponents/Pagination';\r\n// import { sortCoins } from '../../utilities/sortCoins';\r\nimport getInfo from '../../API/api';\r\n\r\nfunction ListPage({ searchText, coinsPerPage, rate }) {\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const [currentCoins, setCurrentCoins] = useState([]);\r\n  const [totalCoins, setTotalCoins] = useState(2000);\r\n  const [time, setTime] = useState(0);\r\n  const [totalPages, setTotalPages] = useState(200);\r\n  // const [sortedCoins, setSortedCoins] = useState([]);\r\n  // const [sortName, setSortName] = useState('');\r\n  // const [cryptocurrency, setCryptocurrency] = useState([]);\r\n\r\n  const pagination = (pageNamber) => setCurrentPage(pageNamber);\r\n\r\n  // const sort = (name) => setSortName(name);\r\n\r\n  useEffect(() => {\r\n    const update = () => {\r\n      setTime((prevTime) => prevTime + 1);\r\n      setTimeout(update, 10000);\r\n    };\r\n    update();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    setTotalPages(Math.ceil(totalCoins / coinsPerPage));\r\n  }, [totalCoins, coinsPerPage]);\r\n\r\n  useEffect(() => {\r\n    const getCoins = async () => {\r\n      const firstCoinsIndex = (currentPage * coinsPerPage) - coinsPerPage;\r\n      let response;\r\n      if (searchText.length !== 0) {\r\n        const responseCount = await getInfo(`assets/?search=${searchText}&limit=2000`);\r\n        response = await getInfo(`assets/?offset=${firstCoinsIndex}&limit=${coinsPerPage}&search=${searchText}`);\r\n        setTotalCoins(responseCount.length);\r\n      } else {\r\n        response = await getInfo(`assets/?offset=${firstCoinsIndex}&limit=${coinsPerPage}`);\r\n        setTotalCoins(2000);\r\n      }\r\n      setCurrentCoins(response);\r\n    };\r\n    getCoins();\r\n  }, [coinsPerPage, time, currentPage, searchText]);\r\n\r\n  // useEffect(() => {\r\n  //   if (searchText.length !== 0) return;\r\n  //   setSortedCoins(sortCoins(sortName, cryptocurrency));\r\n  // }, [sortName, searchText, cryptocurrency]);\r\n\r\n  return (\r\n    <div className=\"list-page\">\r\n      <Header />\r\n      <CoinBlock coins={currentCoins} rate={rate} />\r\n      <Pagination totalPages={totalPages} pagination={pagination} />\r\n    </div>\r\n\r\n  );\r\n}\r\n\r\nexport default ListPage;\r\n"]},"metadata":{},"sourceType":"module"}