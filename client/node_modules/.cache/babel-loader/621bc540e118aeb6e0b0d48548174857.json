{"ast":null,"code":"import _slicedToArray from\"C:/Users/mrgil/OneDrive/\\u0420\\u0430\\u0431\\u043E\\u0447\\u0438\\u0439 \\u0441\\u0442\\u043E\\u043B/Coincap/Coin/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useEffect,useState}from'react';import{useQuery}from'@apollo/client';import{BrowserRouter,Routes,Route}from'react-router-dom';import{useSelector}from'react-redux';import ListPage from'./Main/LitsPage/CoinsPage';import{StorePage}from'./Main/BasketPage/StorePage';import InfoPage from'./Main/InfoPage/InfoPage';import Header from'./Header/Header';import Message from'./Message';import{GET_RATE_INFO}from'./query/rates';import{GET_CURRENT_COINS_FOR_HEADER}from'./query/coins';import'./Styles/styles.scss';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var initialState={id:'united-states-dollar',value:1,symbol:'$'};function App(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),coins=_useState2[0],setCoins=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),searchText=_useState4[0],setSearchText=_useState4[1];var _useState5=useState(10),_useState6=_slicedToArray(_useState5,2),coinsPerPage=_useState6[0],setCoinsPerPage=_useState6[1];var _useState7=useState('united-states-dollar'),_useState8=_slicedToArray(_useState7,2),rateId=_useState8[0],setRateId=_useState8[1];var _useState9=useState(initialState),_useState10=_slicedToArray(_useState9,2),rate=_useState10[0],setRate=_useState10[1];var _useQuery=useQuery(GET_RATE_INFO,{variables:{id:rateId}}),loading=_useQuery.loading,data=_useQuery.data;var _useQuery2=useQuery(GET_CURRENT_COINS_FOR_HEADER,{variables:{firstIndex:0,coinsPerPage:4},pollInterval:10000}),loadingCurrentCoins=_useQuery2.loading,currentCoins=_useQuery2.data;var tasks=useSelector(function(state){return state;});useEffect(function(){if(!loadingCurrentCoins)setCoins(currentCoins.getCurrentCoins);},[currentCoins]);useEffect(function(){if(rateId&&!loading){var response=data.getRate;if(response){setRate({id:response.id,value:response.rateUsd,symbol:response.currencySymbol});}}},[data]);var search=function search(text){return setSearchText(text);};var takeCoinsPerPage=function takeCoinsPerPage(number){return setCoinsPerPage(Number(number));};var getRateId=function getRateId(id){return setRateId(id);};return/*#__PURE__*/_jsxs(BrowserRouter,{children:[/*#__PURE__*/_jsx(Header,{coins:coins,rate:rate,tasks:tasks,search:search,takeCoinsPerPage:takeCoinsPerPage,getRateId:getRateId}),/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/*\",element:/*#__PURE__*/_jsx(ListPage,{searchText:searchText,coinsPerPage:coinsPerPage,rate:rate})}),/*#__PURE__*/_jsx(Route,{path:\"/storepage\",element:/*#__PURE__*/_jsx(StorePage,{tasks:tasks})}),/*#__PURE__*/_jsx(Route,{path:\"/infopage/:id\",element:/*#__PURE__*/_jsx(InfoPage,{rate:rate})})]}),/*#__PURE__*/_jsx(Message,{})]});}export default App;","map":{"version":3,"sources":["C:/Users/mrgil/OneDrive/Рабочий стол/Coincap/Coin/client/src/App.jsx"],"names":["useEffect","useState","useQuery","BrowserRouter","Routes","Route","useSelector","ListPage","StorePage","InfoPage","Header","Message","GET_RATE_INFO","GET_CURRENT_COINS_FOR_HEADER","initialState","id","value","symbol","App","coins","setCoins","searchText","setSearchText","coinsPerPage","setCoinsPerPage","rateId","setRateId","rate","setRate","variables","loading","data","firstIndex","pollInterval","loadingCurrentCoins","currentCoins","tasks","state","getCurrentCoins","response","getRate","rateUsd","currencySymbol","search","text","takeCoinsPerPage","number","Number","getRateId"],"mappings":"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","sourcesContent":["import { useEffect, useState } from 'react';\r\nimport { useQuery } from '@apollo/client';\r\nimport { BrowserRouter, Routes, Route } from 'react-router-dom';\r\nimport { useSelector } from 'react-redux';\r\nimport ListPage from './Main/LitsPage/CoinsPage';\r\nimport { StorePage } from './Main/BasketPage/StorePage';\r\nimport InfoPage from './Main/InfoPage/InfoPage';\r\nimport Header from './Header/Header';\r\nimport Message from './Message';\r\nimport { GET_RATE_INFO } from './query/rates';\r\nimport { GET_CURRENT_COINS_FOR_HEADER } from './query/coins';\r\nimport './Styles/styles.scss';\r\n\r\nconst initialState = {\r\n  id: 'united-states-dollar',\r\n  value: 1,\r\n  symbol: '$',\r\n};\r\n\r\nfunction App() {\r\n  const [coins, setCoins] = useState([]);\r\n  const [searchText, setSearchText] = useState('');\r\n  const [coinsPerPage, setCoinsPerPage] = useState(10);\r\n  const [rateId, setRateId] = useState('united-states-dollar');\r\n  const [rate, setRate] = useState(initialState);\r\n  const { loading, data } = useQuery(GET_RATE_INFO, {\r\n    variables: {\r\n      id: rateId,\r\n    },\r\n  });\r\n  const { loading: loadingCurrentCoins, data: currentCoins } = useQuery(GET_CURRENT_COINS_FOR_HEADER, {\r\n    variables: {\r\n      firstIndex: 0,\r\n      coinsPerPage: 4,\r\n    },\r\n    pollInterval: 10000,\r\n  });\r\n\r\n  const tasks = useSelector((state) => state);\r\n\r\n  useEffect(() => {\r\n    if (!loadingCurrentCoins) setCoins(currentCoins.getCurrentCoins);\r\n  }, [currentCoins]);\r\n\r\n  useEffect(() => {\r\n    if (rateId && !loading) {\r\n      const response = data.getRate;\r\n      if (response) {\r\n        setRate({\r\n          id: response.id,\r\n          value: response.rateUsd,\r\n          symbol: response.currencySymbol,\r\n        });\r\n      }\r\n    }\r\n  }, [data]);\r\n\r\n  const search = (text) => setSearchText(text);\r\n\r\n  const takeCoinsPerPage = (number) => setCoinsPerPage(Number(number));\r\n\r\n  const getRateId = (id) => setRateId(id);\r\n\r\n  return (\r\n    <BrowserRouter>\r\n      <Header coins={coins} rate={rate} tasks={tasks} search={search} takeCoinsPerPage={takeCoinsPerPage} getRateId={getRateId} />\r\n      <Routes>\r\n        <Route path=\"/*\" element={<ListPage searchText={searchText} coinsPerPage={coinsPerPage} rate={rate} />} />\r\n        <Route path=\"/storepage\" element={<StorePage tasks={tasks} />} />\r\n        <Route path=\"/infopage/:id\" element={<InfoPage rate={rate} />} />\r\n      </Routes>\r\n      <Message />\r\n    </BrowserRouter>\r\n\r\n  );\r\n}\r\n\r\nexport default App;\r\n"]},"metadata":{},"sourceType":"module"}